# Template file for 'munt'
pkgname=munt
version=2.4.0
revision=1
build_style=cmake
configure_args="-Dlibmt32emu_SHARED=TRUE -Dlibmt32emu_WITH_INTERNAL_RESAMPLER=FALSE"
hostmakedepends="pkgconf qt5-qmake qt5-host-tools"
makedepends="glib-devel portaudio-devel alsa-lib-devel pulseaudio-devel
 libsoxr-devel qt5-devel qt5-multimedia-devel"
short_desc="Software synthesiser emulating the Roland MT-32, CM-32L, and LAPC-I"
maintainer="a dinosaur <nick@a-dinosaur.com>"
license="LGPL-2.1-or-later"
homepage="http://munt.sourceforge.net/"
distfiles="${SOURCEFORGE_SITE}/munt/munt/${version}/munt-${version}.tar.gz"
checksum=b4f7054df1d3f89e2cc683ff6182c4d0a272daceffc4d27fd968b6eaebcdc9ed

munt-devel_package() {
	depends="${sourcepkg}>=${version}_${revision}"
	short_desc+=" - development files"
	pkg_install() {
		vmove "usr/lib/*.so"
		vmove usr/include
	}
}

munt-qt_package() {
	depends="desktop-file-utils"
	short_desc="GUI Qt frontend for Munt"
	license="GPL-3.0-or-later"
	pkg_install() {
		vmove usr/share/doc/munt/mt32emu-qt
		vmove usr/bin/mt32emu-qt
		vinstall ${FILESDIR}/munt.desktop 644 usr/share/applications
		vinstall ${FILESDIR}/munt.png 644 usr/share/pixmaps
	}
}

munt-smf2wav_package() {
	short_desc="Produces WAVE files from MT-32 formatted Standard MIDI Files"
	license="GPL-3.0-or-later"
	pkg_install() {
		vmove usr/share/doc/munt/smf2wav
		vmove usr/bin/mt32emu-smf2wav
	}
}
